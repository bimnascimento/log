input {
  # jdbc {
  #   jdbc_driver_library => "/logstash-6.3.0/lib/sqljdbc42.jar"
  #   jdbc_driver_class => "com.microsoft.sqlserver.jdbc.SQLServerDriver"
  #   jdbc_connection_string => "jdbc:sqlserver://XXX:XXX;databaseName=XXX"
  #   jdbc_user => "XXX"
  #   jdbc_password => "XXX"
  #   schedule => "* * * * *"
  #   statement => "select xxx from XXX"
  # }
  #  file {
  #     path => "/tmp/logs/rails/*.log"
  #     start_position => "beginning"
  #     type => "rails-logs"
  #  }
  #  file {
  #     path => "/tmp/logs/nginx/*.log"
  #     start_position => "beginning"
  #     type => "nginx-logs"
  #  }
   file {
      path => "/tmp/logs/*.log"
      start_position => "beginning"
      # type => "file-logs"
      # sincedb_path => "/dev/null"
   }
   gelf { 
      # type => 'gelf'
      port => 12201
   }
}
filter {
  # grok {
  #   match => {"message" => ["%{TIMESTAMP_ISO8601:logdate} %{WORD:hostname} %{WORD:container_name}: %{GREEDYDATA:[@metadata][messageline]}",
  #   "%{TIMESTAMP_ISO8601:logdate} %{WORD:hostname} %{WORD:container}\[%{INT:haprorxy_id}\]: %{GREEDYDATA:[@metadata][messageline]}"]}
  # }
  # mutate {
  #   remove_field => ["message", "@timestamp"]
  # }
  # json {
  #   source => "[@metadata][messageline]"
  # }
  # json { 
  #   source => "message" 
  # } 
  # date { 
  #   match => ["timestamp", "UNIX"]
  # }
  # if [type] == "rails-logs" {
  #   grok {
  #     match => {"message" => "[DFEWI], \[%{TIMESTAMP_ISO8601:occurrency_time} #%{POSINT:pid}\] %{LOGLEVEL:loglevel} -- : \[%{UUID:uuid}\] %{GREEDYDATA:message}"}
  #     overwrite => [ "message" ]
  #     remove_field => ["uuid"]
  #   }
  # }
  # if [type] == "nginx-logs" {
  #   grok {
  #     match => {"message" => "%{IPORHOST:clientip} - - \[%{HTTPDATE:timestamp}\] \"%{WORD:verb} %{URIPATHPARAM:request} HTTP/%{NUMBER:httpversion}\" %{NUMBER:response} (?:%{NUMBER:bytes}|-) (?:/\"(?:%{URI:referrer}|-)\"|%{QS:referrer}) %{QS:agent}"}
  #   }
  #   date {
  #     match => [ "timestamp", "dd/MMM/YYYY:H:m:s Z" ]
  #   }
  # }
  # mutate {
  #  add_field => { "message" => "Test server" }
  #  add_field => { "host" => "localhost" }
  # }
}
output {
  stdout { 
    codec => rubydebug 
  }
  # gelf {
  #   # id => "my_plugin_id"
  #   host => "localhost"
  #   port => 12201
  #   short_message => "Testing gelf output 12201"
  # }
  # gelf {
  #   # id => "my_plugin_id"
  #   host => "localhost"
  #   port => 12202
  #   short_message => "Testing gelf output 12202"
  # }
  gelf {
    # id => "my_plugin_id"
    host => "graylog"
    port => 12202
    short_message => "Testing gelf output 12202"
  }
  # elasticsearch {
  #   hosts => ["elasticsearch"]
  #   # action => "index"
  #   # template_name => "logs_elk"
  #   # document_type => "applicationlogs"
  #   # index => "logstash-%{[type]}-%{+YYYY.MM.dd}"
  #   # user => "elastic"
	# 	# password => "changeme"
  # }
}